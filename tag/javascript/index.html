<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Ian Wootten - Web Developer, Cardiff</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/fonts/open-sans.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/syntax.css">

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-263865-2', 'ianwootten.co.uk');
      ga('send', 'pageview');

    </script>
</head>
<body>

<div class="container blog">
    <header>
      <nav>
      <ul class="nav">
        <li><a class="blog active" href="/">Blog</a></li>
        <li><a class="javascript " href="/category/javascript">Javascript</a></li>
        <li><a class="web-apps " href="/category/web-apps">Web Apps</a></li>
        <li><a class="about" href="/about">About</a></li>
        <li><a class="contact" href="/contact">Contact</a></li>
      </ul>
      </nav>
      <div class="clear"></div>
    </header>

      
        <div class="post">
          <h1><a href="/2015/06/30/blogging-with-metalsmith">Blogging with Metalsmith</a></h1>
      <div class="author_meta">30 Jun 2015</div>

          <p>I&#39;m switching blogging platforms once more. Moving from Wordpress to Jekyll enabled me to no longer deal with the multitude of updates and protected me hacks I could be susceptible to, but Jekyll being written in Ruby (a language I&#39;m not overly familiar with) has been a problem. I&#39;ve been able to cobble together <a href="http://www.ianwootten.co.uk/2014/06/02/porting-a-wordpress-blog-to-jekyll-part-2/">scripts</a> to deal with the custom parts of my blog build, but it&#39;s never felt like home.</p>
<p>I&#39;ve decided to start using <a href="http://metalsmith.io">Metalsmith</a> - a static site generator written in Javascript. It&#39;s existed before my switch to Jekyll and now seems to have enough of a plugin ecosystem in order to provide a collection of plugins to provide behaviour I need to make use of.</p>
<h2 id="metalsmith">Metalsmith</h2>
<p>Metalsmith operates much like a task runner like gulp, where a set of functions manipulate a number of files, one after another in order to eventually build a static site to your liking. A simple build script could be as follows:</p>
<div class='hljs'><pre><code class='javascript'><span class="hljs-keyword">var</span> Metalsmith = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith'</span>),
    markdown   = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-markdown'</span>),
    templates  = <span class="hljs-built_in">require</span>(<span class="hljs-string">'metalsmith-templates'</span>);

Metalsmith(__dirname)
  .use(markdown())
  .use(templates(<span class="hljs-string">'swig'</span>))
  .build();</code></pre></div><p>This is just standard node script with dependencies installed via npm. Metalsmith assumes defaults of src and build for the source of markdown and destination of html. An example of markdown containing some useful front-matter might be as follows:</p>
<div class='hljs'><pre><code class='markdown'><span class="hljs-horizontal_rule">---</span>
title: Blogging with Metalsmith
author: Ian
date: 2015-06-30
year: 2015
month: 2015/06
categories:
  - Javascript
tags:
  - metalsmith
<span class="hljs-header">  - javascript
---</span>
I'm switching blogging platforms once more...</code></pre></div><p>It also assumes a default template directory under templates, containing a default post template &#39;post.html&#39; - which in the example is written in a swig template as below.</p>
<div class='hljs'><pre><code class='twig'><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"post"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"/</span></span></span><span class="hljs-variable">{{ path }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-value">"</span>&gt;</span></span><span class="hljs-variable">{{ title }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"post_date"</span>&gt;</span></span><span class="hljs-variable">{{ <span class="hljs-function"><span class="hljs-keyword">date</span></span> | <span class="hljs-function"><span class="hljs-keyword">date</span><span class="hljs-params">('d M Y')</span></span> }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    </span><span class="hljs-variable">{{ contents | safe }}</span><span class="xml">
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span></span></code></pre></div><p>I&#39;ve managed to reduce my build time (though I&#39;m not currently compiling sass and have added a new sitemap), but am much more familiar with the toolchain in question. Hopefully that&#39;ll lead to further, more frequent updates not just in content, but also the design of my company site and this blog.</p>
<p>I&#39;ll be adding future blogs about my metalsmith toolchain and hurdles with that I&#39;ve overcome.</p>


          <div class="entry_content">Tagged
              
                
                <a href="/tag/metalsmith">metalsmith</a>,
                
                <a href="/tag/blogging">blogging</a>,
                
                <a href="/tag/javascript">javascript</a>,
                
              
              | <a href="2015/06/30/blogging-with-metalsmith/#disqus_thread">Leave a comment</a>
          </div>
        </div>
      
        <div class="post">
          <h1><a href="/2013/04/03/the-problem-with-full-stack-js-applications">The Problem with Full Stack JS Applications</a></h1>
      <div class="author_meta">03 Apr 2013</div>

          <p>Whilst node.js heralded an era of being able to use a single language for both server and client side development, nobody mentioned the confusion such an approach could cause. It&#8217;s inevitable that there&#8217;s going to be similarities in code that constructs data on the server and that which presents it on the client. The fact that the two are written in the same language and the structure of them is so tightly coupled can make it easy to lose track of where you are and what you&#8217;re doing when knee deep in code.</p>
<p>Having primarily been using a full js stack (express on the server, backbone on the client) for side projects over the last year or so, I&#8217;ve certainly found myself tied up in this kind of knot. For example, if I&#8217;m looking at event.js, which represents an event on a calendar it could be the server event representation, used as an accessor for a db or a client side backbone model presenting the events attributes as part of a view. Usually (if you&#8217;re using a sensible class naming scheme) it is enough to know the file (.php or .js) within which you&#8217;re working and if that&#8217;s not enough, then the language syntax usually is a dead giveaway for where you are in your codebase. But this isn&#8217;t the case when working in one language. My guess is you&#8217;re going to have to take a second glance in order to figure out where you are, which isn&#8217;t a big issue, but is frustrating.</p>
<p>Currently my apps typically are structured like this:</p>
<p>server.js (Main node/express file)<br>-lib (Classes for DB Calls)<br>-node_modules (Node requires)<br>-public (Client backbone app)<br>&nbsp;&nbsp;&nbsp;&nbsp;-css<br>&nbsp;&nbsp;&nbsp;&nbsp;-images<br>&nbsp;&nbsp;&nbsp;&nbsp;-js<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-lib (Backbone and other dependencies)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-collections<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-models<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-templates<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-views<br>-routes (Contains the main express routes)</p>
<p>But I actually think the following is a better approach:</p>
<p>-server<br>&nbsp;&nbsp;&nbsp;&nbsp;server.js<br>&nbsp;&nbsp;&nbsp;&nbsp;-lib<br>&nbsp;&nbsp;&nbsp;&nbsp;-node_modules<br>&nbsp;&nbsp;&nbsp;&nbsp;-routes<br>-client (Renamed from public)<br>&nbsp;&nbsp;&nbsp;&nbsp;-css<br>&nbsp;&nbsp;&nbsp;&nbsp;-images<br>&nbsp;&nbsp;&nbsp;&nbsp;-js<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-lib<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-collections<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-models<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-templates<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-views</p>
<p>At least with the second approach, it is easier to have a clear idea of where to find classes on first opening them. Unfortunately, this doesn&#8217;t however solve my problem of moving between server side and client logic and pausing for a moment before realising I am where I need to work. This is a first world problem for which I don&#8217;t believe there is a solution.</p>


          <div class="entry_content">Tagged
              
                
                <a href="/tag/javascript">javascript</a>,
                
                <a href="/tag/web-development">web development</a>,
                
              
              | <a href="2013/04/03/the-problem-with-full-stack-js-applications/#disqus_thread">Leave a comment</a>
          </div>
        </div>
      

      <div class="pagination">
          
          <span class="page_number ">Page: 1 of 1</span>

          
      </div>
    <footer>
      <div class="footer-about">
        I'm a Web Developer  working at <a href="http://niftydigits.com">Nifty Digits</a> in Cardiff, UK. Here, I enjoy talking code - mostly javascript. I'm <a href="http://twitter.com/iwootten">@iwootten</a> on twitter.
      </div>
    </footer>
  </div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'ianwootten'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
</body>
</html>

