<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Ian Wootten - Web Developer, Cardiff</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/fonts/open-sans.css" />
        <link rel="stylesheet" href="/css/style.css" />
        <link rel="stylesheet" href="/css/syntax.css" />

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-263865-2', 'ianwootten.co.uk');
      ga('send', 'pageview');

    </script>
    </head>
    <body>


    <div class="container blog">
      <header>
        <nav>
        <ul class="nav">
          <li><a class="blog active" href="/">Blog</a></li>
          <li><a class="javascript" href="/category/javascript">Javascript</a></li>
          <li><a class="web-apps" href="/category/web-apps">Web Apps</a></li>
          <li><a class="about" href="/about">About</a></li>
          <li><a class="contact" href="/contact">Contact</a></li>
        </ul>
        </nav>
        <div class="clear"></div>
      </header>

          

	<div class="post">
	<h1><a href="/2014/06/02/porting-a-wordpress-blog-to-jekyll-part-2">Porting a Wordpress blog to Jekyll: Part 2</a></h1>
<div class="author_meta">02 Jun 2014</div>
	<p>In the second of my posts in porting a wordpress blog over to jekyll, I outline how I’ve replicated wordpress’s default permalink structure on my own blog.</p>

<h2 id="creating-category-and-tag-pages">Creating Category and Tag Pages</h2>

<p>Jekyll doesn’t create category or tag index pages for those categories listed in your _posts source. Instead, you’ll need to use a plugin to recreate them. I used the tutorial <a href="http://realjenius.com/2012/12/01/jekyll-category-tag-paging-feeds/">here</a> as the basis for my category/tag generator, with my plugins/generate_cats_and_tags.rb source below:</p>

<div class="highlight"><pre><code class="ruby"><span class="k">module</span> <span class="nn">Jekyll</span>
    <span class="k">class</span> <span class="nc">CatsAndTags</span> <span class="o">&lt;</span> <span class="no">Generator</span>
        <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
          <span class="n">site</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">category</span><span class="o">|</span>
            <span class="n">build_subpages</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
          <span class="k">end</span>

          <span class="n">site</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">tag</span><span class="o">|</span>
            <span class="n">build_subpages</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
          <span class="k">end</span>
        <span class="k">end</span>

        <span class="c1"># Do the actual generation.</span>
        <span class="k">def</span> <span class="nf">build_subpages</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
          <span class="n">posts</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">posts</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">sort_by</span> <span class="p">{</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="o">-</span><span class="nb">p</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">to_f</span> <span class="p">}</span>
          <span class="n">atomize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
          <span class="n">paginate</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
        <span class="k">end</span>

        <span class="k">def</span> <span class="nf">atomize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
          <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;/</span><span class="si">#{</span><span class="n">type</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">posts</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
          <span class="n">atom</span> <span class="o">=</span> <span class="no">AtomPage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">posts</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">,</span> <span class="n">posts</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">)</span>
          <span class="n">site</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="n">atom</span>
        <span class="k">end</span>

        <span class="k">def</span> <span class="nf">paginate</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
          <span class="n">pages</span> <span class="o">=</span> <span class="no">Pager</span><span class="o">.</span><span class="n">calculate_pages</span><span class="p">(</span><span class="n">posts</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;paginate&#39;</span><span class="o">].</span><span class="n">to_i</span><span class="p">)</span>
          <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.pages</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">num_page</span><span class="o">|</span>
            <span class="n">pager</span> <span class="o">=</span> <span class="no">Pager</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">num_page</span><span class="p">,</span> <span class="n">posts</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span> <span class="n">pages</span><span class="p">)</span>
            <span class="n">slug</span> <span class="o">=</span> <span class="n">posts</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
            <span class="n">base_path</span> <span class="o">=</span> <span class="s2">&quot;/</span><span class="si">#{</span><span class="n">type</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">slug</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">base_path</span>
            <span class="k">if</span> <span class="n">num_page</span> <span class="o">&gt;</span> <span class="mi">1</span>
              <span class="n">path</span> <span class="o">+=</span> <span class="s2">&quot;/page/</span><span class="si">#{</span><span class="n">num_page</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">end</span>
            <span class="n">newpage</span> <span class="o">=</span> <span class="no">GroupSubPage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">base_path</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">posts</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">)</span>
            <span class="n">newpage</span><span class="o">.</span><span class="n">pager</span> <span class="o">=</span> <span class="n">pager</span>
            <span class="n">site</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="n">newpage</span>

          <span class="k">end</span>
        <span class="k">end</span>
    <span class="k">end</span>

    <span class="k">class</span> <span class="nc">GroupSubPage</span> <span class="o">&lt;</span> <span class="no">Page</span>
        <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">base_path</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
          <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
          <span class="vi">@base</span> <span class="o">=</span> <span class="n">base</span>
          <span class="vi">@dir</span> <span class="o">=</span> <span class="n">dir</span>
          <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>

          <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
          <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">&#39;_layouts&#39;</span><span class="p">),</span> <span class="s2">&quot;group_index.html&quot;</span><span class="p">)</span>
          <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="n">type</span><span class="o">]</span> <span class="o">=</span> <span class="n">val</span>
          <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;base&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="n">base_path</span>
        <span class="k">end</span>
    <span class="k">end</span>

    <span class="k">class</span> <span class="nc">AtomPage</span> <span class="o">&lt;</span> <span class="no">Page</span>
        <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
            <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
            <span class="vi">@base</span> <span class="o">=</span> <span class="n">base</span>
            <span class="vi">@dir</span> <span class="o">=</span> <span class="n">dir</span>
            <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;atom.xml&#39;</span>

            <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
            <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">&#39;_layouts&#39;</span><span class="p">),</span> <span class="s2">&quot;group_atom.xml&quot;</span><span class="p">)</span>
            <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="n">type</span><span class="o">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s2">&quot;grouptype&quot;</span><span class="o">]</span> <span class="o">=</span> <span class="n">type</span>
            <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s2">&quot;posts&quot;</span><span class="o">]</span> <span class="o">=</span> <span class="n">posts</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">9</span><span class="o">]</span>
        <span class="k">end</span>
    <span class="k">end</span>
<span class="k">end</span></code></pre></div>

<p>I chose to pass in an extra parameter to the Pager, defining the “base_path” for which an index page has been generated. This enables absolute links to pages and prevents situations like /category/javascript/category/javascript/page/1, which occur when relative pagination is generated when on a category page. </p>

<p>A view making use of it would look like the following:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;pagination&quot;</span><span class="nt">&gt;</span>
        {% if paginator.previous_page %}
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ page.base }}/page/{{ paginator.previous_page }}&quot;</span> <span class="na">class=</span><span class="s">&quot;previous&quot;</span><span class="nt">&gt;</span>Previous<span class="nt">&lt;/a&gt;</span>
        {% else %}
          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;previous&quot;</span><span class="nt">&gt;</span>Previous<span class="nt">&lt;/span&gt;</span>
        {% endif %}
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;page_number &quot;</span><span class="nt">&gt;</span>Page: {{ paginator.page }} of {{ paginator.total_pages }}<span class="nt">&lt;/span&gt;</span>
        {% if paginator.next_page %}
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ page.base }}/page/{{ paginator.next_page }}&quot;</span> <span class="na">class=</span><span class="s">&quot;next&quot;</span><span class="nt">&gt;</span>Next<span class="nt">&lt;/a&gt;</span>
        {% else %}
          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;next &quot;</span><span class="nt">&gt;</span>Next<span class="nt">&lt;/span&gt;</span>
        {% endif %}
<span class="nt">&lt;/div&gt;</span></code></pre></div>

<h2 id="creating-archive-pages">Creating Archive Pages</h2>

<p>In a similar fashion, Jekyll doesn’t create pages or pagination for previous years or months. Even if they are not oft used by others, I find it useful myself to hit up my archives for <a href="http://ianwootten.co.uk/2004">previous years</a> on occasion and <a href="http://www.ianwootten.co.uk/2004/05/06/chicken-breasts/">laugh at the random work I did for my undergraduate</a>.</p>

<p>I created the following plugin to generate indexes at /{year} /{year}/{month} and /{year}/page/{pageNo} and /{year}/{month}/page/{pageNo} if necessary.</p>

<div class="highlight"><pre><code class="ruby"><span class="k">module</span> <span class="nn">Jekyll</span>

  <span class="k">class</span> <span class="nc">ArchiveGenerator</span> <span class="o">&lt;</span> <span class="no">Generator</span>
    <span class="n">safe</span> <span class="kp">true</span>
    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">site</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">key?</span> <span class="s1">&#39;archive_index&#39;</span>
        <span class="n">site</span><span class="o">.</span><span class="n">posts</span><span class="o">.</span><span class="n">group_by</span><span class="p">{</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span> <span class="p">{</span><span class="s2">&quot;month&quot;</span> <span class="o">=&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span> <span class="o">=&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">year</span><span class="p">}</span> <span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">period</span><span class="p">,</span> <span class="n">posts</span><span class="o">|</span>
          <span class="n">posts</span> <span class="o">=</span> <span class="n">posts</span><span class="o">.</span><span class="n">sort_by</span> <span class="p">{</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="o">-</span><span class="nb">p</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">to_f</span> <span class="p">}</span>
          <span class="n">archive_dir</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">period</span><span class="o">[</span><span class="s2">&quot;year&quot;</span><span class="o">].</span><span class="n">to_s</span><span class="p">(),</span> <span class="s2">&quot;%02d&quot;</span> <span class="o">%</span> <span class="n">period</span><span class="o">[</span><span class="s2">&quot;month&quot;</span><span class="o">].</span><span class="n">to_s</span><span class="p">())</span>
          <span class="n">paginate</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">archive_dir</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
        <span class="k">end</span>
        <span class="n">site</span><span class="o">.</span><span class="n">posts</span><span class="o">.</span><span class="n">group_by</span><span class="p">{</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span> <span class="p">{</span><span class="s2">&quot;year&quot;</span> <span class="o">=&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">year</span><span class="p">}</span> <span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">period</span><span class="p">,</span> <span class="n">posts</span><span class="o">|</span>
          <span class="n">posts</span> <span class="o">=</span> <span class="n">posts</span><span class="o">.</span><span class="n">sort_by</span> <span class="p">{</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="o">-</span><span class="nb">p</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">to_f</span> <span class="p">}</span>
          <span class="n">archive_dir</span> <span class="o">=</span> <span class="n">period</span><span class="o">[</span><span class="s2">&quot;year&quot;</span><span class="o">].</span><span class="n">to_s</span><span class="p">()</span>
          <span class="n">paginate</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">archive_dir</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">paginate</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
      <span class="n">pages</span> <span class="o">=</span> <span class="no">Pager</span><span class="o">.</span><span class="n">calculate_pages</span><span class="p">(</span><span class="n">posts</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;paginate&#39;</span><span class="o">].</span><span class="n">to_i</span><span class="p">)</span>
      <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.pages</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">num_page</span><span class="o">|</span>
        <span class="n">pager</span> <span class="o">=</span> <span class="no">Pager</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">num_page</span><span class="p">,</span> <span class="n">posts</span><span class="p">,</span> <span class="n">pages</span><span class="p">)</span>
        <span class="n">archive_path</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">dir</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">archive_path</span>
        <span class="k">if</span> <span class="n">num_page</span> <span class="o">&gt;</span> <span class="mi">1</span>
          <span class="n">path</span> <span class="o">+=</span> <span class="s2">&quot;/page/</span><span class="si">#{</span><span class="n">num_page</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">end</span>
        <span class="n">newpage</span> <span class="o">=</span> <span class="no">ArchiveIndex</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">archive_path</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
        <span class="n">newpage</span><span class="o">.</span><span class="n">pager</span> <span class="o">=</span> <span class="n">pager</span>
        <span class="n">site</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="n">newpage</span>

      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">class</span> <span class="nc">ArchiveIndex</span> <span class="o">&lt;</span> <span class="no">Page</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">dir</span><span class="p">,</span> <span class="n">base_path</span><span class="p">,</span> <span class="n">posts</span><span class="p">)</span>
      <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
      <span class="vi">@base</span> <span class="o">=</span> <span class="n">base</span>
      <span class="vi">@dir</span> <span class="o">=</span> <span class="n">dir</span>
      <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>

      <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">&#39;_layouts&#39;</span><span class="p">),</span> <span class="s1">&#39;archive_index.html&#39;</span><span class="p">)</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;base&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="n">base_path</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

<p>The layout of the paginator for the archives is the same as that for categories and tags.</p>

<p>That’s it for my jekyll roundup, I other long time wordpress users find this information useful.</p>

	<div class="entry_content">Tagged <a href="/tag/jekyll">jekyll</a>, <a href="/tag/static-sites">static sites</a>, <a href="/tag/wordpress">wordpress</a>,  | <a href="/2014/06/02/porting-a-wordpress-blog-to-jekyll-part-2/#disqus_thread">Leave a comment</a></div>
	</div>

    

	<div class="post">
	<h1><a href="/2014/05/20/porting-a-wordpress-blog-to-jekyll-part-1">Porting a Wordpress blog to Jekyll: Part 1</a></h1>
<div class="author_meta">20 May 2014</div>
	<p>As my last post indicated, I recently made the decision to leave wordpress for jekyll for my blogging software of choice. There were a number of hurdles I had to overcome in order to get to a state I was happy with, emulating my previous blog structure. This first post details a few of the setup problems and how I’ve overcome them.</p>

<h2 id="using-compass-for-a-jekyll-theme">Using Compass for a Jekyll theme</h2>

<p>The first problem I hit was my use of compass to create parts of the theme I intended to use for my blog. When attempting to use <a href="https://github.com/mscharley/jekyll-compass">jekyll-compass</a> to enable that, I hit the following error:</p>

<div class="highlight"><pre><code class="bash">Unable to activate compass-0.12.6, because sass-3.3.7 conflicts with sass <span class="o">(</span>~&gt; 3.2.19<span class="o">)</span> <span class="o">(</span>Gem::LoadError<span class="o">)</span></code></pre></div>

<p>After searching for a bit I came across the <a href="https://github.com/jekyll/jekyll/issues/2263">following issue</a> which detailed a solution - but unfortunately it didn’t work for me. Being somewhat of a newbie to Ruby, I didn’t realise that after creating a Gem as instructed in the fix, I actually needed to “bundle install” it. After a little more digging and tweaking against <a href="http://twitter.com/markturner">Mark Turners</a> advice, I ended up with a Gem file like so:</p>

<div class="highlight"><pre><code class="ruby"><span class="n">source</span> <span class="s2">&quot;https://rubygems.org&quot;</span>

<span class="n">gem</span> <span class="s1">&#39;sass&#39;</span><span class="p">,</span> <span class="s2">&quot;~&gt; 3.2.19&quot;</span>
<span class="n">gem</span> <span class="s1">&#39;jekyll-compass&#39;</span><span class="p">,</span> <span class="s2">&quot;1.0.6&quot;</span></code></pre></div>

<p>Which has finally given me what I wanted.</p>

<h2 id="using-custom-pygments-themes-for-syntax-highlighting">Using Custom Pygments Themes for Syntax highlighting</h2>

<p>Jekyll uses pygments for fancy pants syntax highlighting. Although an example syntax.css is linked to in the jekyll documentation, I prefer a darker theme myself. Jekyll doesn’t tell you it’s possible to generate any one of the numerous pygments styles like this:</p>

<div class="highlight"><pre><code class="bash">pygmentize -f html -S monokai -a .highlight &gt; monokai.css</code></pre></div>

<p>I’ve used the monokai theme for my own highlighting. There are demos of each of the themes on the pygments site - <a href="http://pygments.org/demo/357593/">here is an example</a>. You can then use that as the basis for your own custom highlighting. I’ve created each one of the 19 possible themes and <a href="https://github.com/iwootten/jekyll-syntax">put them up on github</a>.</p>

<h2 id="moving-to-disqus-commenting">Moving to Disqus Commenting</h2>

<p>Given I now had a static site, I needed a means of continuing supporting comments. Disqus does just that by embedding comments using javascript into post pages. Adding disqus  proved to be the biggest hurdle for me. I had a large number of comments from people on my blog over the years and therefore I didn’t want to lose them. After exporting my site as xml and uploading them to disqus, I finally set jekyll loose on my site along with disqus embeds, but I couldn’t see them. The problem I found after a frustrating hour or two of uploading new versions of my site over ftp, was jekyll used a trailing slash (as the post is an index within a directory) to denote links to posts. It’s possible however to do away with this using .htaccess if you’re using Apache.</p>

<div class="highlight"><pre><code class="apache"><span class="nb">Options</span> -Multiviews +FollowSymLinks
<span class="nb">RewriteEngine</span> <span class="k">On</span>
<span class="nb">RewriteBase</span> /
<span class="nb">DirectorySlash</span> <span class="k">Off</span>

<span class="c"># remove the trailing slash</span>
<span class="nb">RewriteRule</span> ^(.*)\/(\?.*)?$ $1$2 [R=301,L]

<span class="c"># rewrite /dir/file to /dir/file/index.html</span>
<span class="nb">RewriteRule</span> ^([\w\/-]+)(\?.*)?$ $1/index.html$2 [L,T=application/x-httpd-html]</code></pre></div>

<p>However, when I began using github pages, this fix didn’t work as github only serves static files and doesn’t allow use of htaccess. Instead, I had to resign to the fact that I would have to have trailing slashes (apparently they’re quicker anyway). This then meant I had to use the Redirect Crawler option of disqus’s “Migrate Threads” wizard (seen below) to crawl my new blog on github and determine where the posts were now located.</p>

<p><img src="http://ianwootten.co.uk/images/screen-2014-05-20.png" title="Disqus Migrate Threads Wizard" /></p>

<p>In my next post I’ll go through how I use plugins to support archive, category and tag pages in jekyll.</p>

	<div class="entry_content">Tagged <a href="/tag/jekyll">jekyll</a>, <a href="/tag/static-sites">static sites</a>, <a href="/tag/wordpress">wordpress</a>, <a href="/tag/disqus">disqus</a>, <a href="/tag/pygments">pygments</a>,  | <a href="/2014/05/20/porting-a-wordpress-blog-to-jekyll-part-1/#disqus_thread">Leave a comment</a></div>
	</div>

    

	<div class="post">
	<h1><a href="/2014/05/18/bye-bye-wordpress">Bye Bye Wordpress</a></h1>
<div class="author_meta">18 May 2014</div>
	<p>I’ve finally made the move to <a href="http://jekyllrb.com">jekyll</a> for building this site. It is now hosted on github pages, comments are handled by disqus and my post source is written in markdown. My entire site is visible <a href="https://github.com/iwootten/iwootten.github.io">on github</a> and revision control for post entries is handled there too.</p>

<p>What finally convinced me with the release of jekyll 2 was the introduction of <a href="http://jekyllrb.com/news/2014/05/06/jekyll-turns-2-0-0/">native sass support</a>. Originally, the prose theme I’m using for my site was using scss, which I later ported to a wordpress theme in order to blog with it. I had the scss for the original design available and therefore thought the jump to using jekyll wouldn’t be that great (or so I thought - overlooking all the features jekyll doesn’t support compared to wordpress). I’m going to blog individually about the pieces of the puzzle in other posts as there are number of things that tripped me up along the way.</p>

<p>But for now, I’d like to bid a fond farewell to wordpress - my go to blogging software for the last 10 years. You once were diminutive, got out of my way and let my voice be heard. That’s no longer the case. These days the only time we speak is when you want me to update you. I’ve got better things to do. Theres a ton of features the length of my arm which I’ve never used and the majority of features which I use rarely. I long for those simpler days once again. You’ve served me well, but I’ve moved on.</p>

	<div class="entry_content">Tagged <a href="/tag/jekyll">jekyll</a>, <a href="/tag/static-sites">static sites</a>, <a href="/tag/wordpress">wordpress</a>,  | <a href="/2014/05/18/bye-bye-wordpress/#disqus_thread">Leave a comment</a></div>
	</div>

    


      <div class="pagination">
        
          <span class="previous">Previous</span>
        
        <span class="page_number ">Page: 1 of 1</span>
        
          <span class="next ">Next</span>
        
      </div>

      <footer>
        <div class="footer-about">
          I'm a Web Developer  working at <a href="http://niftydigits.com">Nifty Digits</a> in Cardiff, UK. Here, I enjoy talking code - mostly javascript. I'm <a href="http://twitter.com/iwootten">@iwootten</a> on twitter.
        </div>
      </footer>
    </div>
   <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'ianwootten'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
  </body>
</html>
